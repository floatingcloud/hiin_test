<ion-view title="{{roomName}}" class="messaging-view"><ion-content ng-style="{ bottom: (data.keyboardHeight + 40) + &quot;px&quot; }" delegate-handle="myScroll" id="messageList"><ion-refresher ng-if="messages.length&gt;0" pulling-text="Pull to refresh..." on-refresh="pullLoadMsg()"></ion-refresher><div id="{{$index}}" ng-repeat="message in messages track by $index" ng-class="message.sender_name == 'me' ? 'chat-balloon-me' : 'chat-balloon-you'" class="message"><div id="firstmsgspace" ng-if="$first" class="row"></div><div ng-if="dateChanged($index)" class="dateLine"><p>{{message.created_at | date: 'yyyy.MM.dd'}}</p></div><div ng-if="message.type != 'notice'"><img ng-click="ShowProfile(message.sender)" ng-profile-image="ng-profile-image" source="{{message.thumbnailUrl}}" alt="" class="thumb_image img-circle"/><div class="name">{{message.sender_name}}</div><br/><div class="desc"><div class="message"><span ng-bind-html="message.content | noHTML | replaceLink" class="msg"></span><div class="time_wrap"><span class="time">{{message.created_at | date : 'shortTime' }}</span></div></div></div></div><div ng-if="message.type == 'notice'"><img ng-click="ShowProfile(message.sender)" ng-profile-image="ng-profile-image" source="{{owner.thumbnailUrl}}" alt="" class="thumb_image img-circle"/><div class="name">{{owner.firstName}}</div><br/><div class="desc"><div class="message"><span ng-bind-html="message.content | noHTML | replaceLink" class="notice"></span><div class="time_wrap"><span class="time">{{message.created_at | date : 'shortTime' }}</span></div></div></div></div></div><div ng-if="messages.length==0" class="nobody_msg"><div class="msg"><p class="big">NO MESSAGES YET</p><p class="normal">Introduce yourself?</p></div></div></ion-content><div ng-style="{ bottom: data.keyboardHeight + &quot;px&quot; }" ontouchmove="return false;" class="message-input"><div ng-if="newMsg != null" class="alert_new_msg"><div class="row"><div class="col col-10"><img ng-profile-image="ng-profile-image" source="{{newMsg.thumbnailUrl}}" class="thumb_image img-circle"/></div><div class="col msg"><div class="row"><div class="col name">{{newMsg.sender_name}}</div></div><div class="row message"><div class="col">{{newMsg.msg}} </div></div></div><div ng-click="ScrollToBottom()" class="col col-10"><div class="arrow"></div></div></div><div class="name"></div><div class="short_message"></div></div><div ng-if="!amIOwner"><div class="row"><div class="col-80"><input type="text" ng-chat-input="ng-chat-input" placeholder="Type your message" on-return="sendMessage()" ng-model="data.message" on-focus="inputUp()" on-blur="inputDown()" autocorrect="off" class="inputText"/></div><div class="col"><button ng-click="sendMessage()" class="send">SEND</button></div></div></div><div ng-if="amIOwner"><div class="row"><div class="col col-70"><input type="text" ng-chat-input="ng-chat-input" placeholder="Type your message" on-return="sendMessage()" ng-model="data.message" on-focus="inputUp()" on-blur="inputDown()" autocorrect="off"/></div><div class="col col-10"><button ng-click="toggleOwnerMsg()" ng-class="regular_msg_flg ? 'owner_msg_on' : 'owner_msg_off' " class="owner_msg_on"></button></div><div class="col col-20"><button ng-click="sendMessage()" class="send">SEND</button></div></div><div class="owner_header"><div class="row"><div class="col col-5 image"></div><div class="col col-5 number">{{userNum}}</div><div class="col col-90 message"><div ng-show="showingMsg"><input type="text" ng-model="popupMessage" readOnly="readOnly" ng-class="regular_msg_flg ? 'on_msg' : 'off_msg'"/></div></div></div></div></div></div></ion-view>